```python
!pip install ultralytics opencv-python-headless matplotlib
```
```python
from google.colab import files
uploaded = files.upload()
```
```python
import cv2
from ultralytics import YOLO
import matplotlib.pyplot as plt

# Load YOLOv8 model (automatically downloads small model)
model = YOLO('yolov8n.pt')

# Read uploaded video
input_video_path = list(uploaded.keys())[0]
cap = cv2.VideoCapture(input_video_path)
output_path = "processed_output.avi"

# Define video writer
fourcc = cv2.VideoWriter_fourcc(*'XVID')
out = cv2.VideoWriter(output_path, fourcc, 20.0, (640, 480))

while cap.isOpened():
    ret, frame = cap.read()
    if not ret:
        break

    frame = cv2.resize(frame, (640, 480))

    # Apply contrast enhancement (dehazing-like effect)
    lab = cv2.cvtColor(frame, cv2.COLOR_BGR2LAB)
    l, a, b = cv2.split(lab)
    clahe = cv2.createCLAHE(clipLimit=3.0, tileGridSize=(8, 8))
    cl = clahe.apply(l)
    merged = cv2.merge((cl, a, b))
    enhanced_frame = cv2.cvtColor(merged, cv2.COLOR_LAB2BGR)

    # Run YOLO detection
    results = model(enhanced_frame)[0]
    annotated_frame = results.plot()

    out.write(annotated_frame)

cap.release()
out.release()
cv2.destroyAllWindows()
```
```python
from google.colab import files
files.download("processed_output.avi")
```
